<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emergency Legal Action to Stop a Secret Transfer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>HabeasNow</h1>
    <p class="tagline">Emergency Legal Toolkit – AO 242 Petition</p>
    <nav>
      <a href="index.html">Home</a>
      <a href="start.html" class="active">Start Petition</a>
      <a href="families.html">For Families</a>
      <a href="lawyers.html">For Lawyers</a>
      <a href="how.html">How It Works</a>
      <a href="about.html">About</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h2>Emergency Legal Action to Stop a Secret Transfer</h2>
      <p><strong>Use this form if someone has been detained without charges or is at risk of being transferred or disappeared.</strong></p>
      <p>This form uses the power of United States law to stop unlawful detention and prevent abuse of authority.</p>
    </section>

    <section class="content">
      <form id="qtef-form">
        <!-- Existing form content stays the same through Section 2 -->

        <label>ZIP Code of Seizure or Last Known Location:
          <input type="text" name="zip_code" id="zip_code" pattern="\d{5}" required>
        </label>

        <!-- Display court info if found -->
        <div id="court-info"></div>

        <!-- Fallback district court selector -->
        <div id="fallback-court-container" style="display:none;">
          <label>If ZIP not recognized, select court manually:
            <select id="fallback-court">
              <option value="">Select Court</option>
              <!-- Populated dynamically from fallbackDistricts -->
            </select>
          </label>
          <input type="hidden" name="court_district" id="fallback-court-district">
          <input type="hidden" name="court_name" id="fallback-court-name">
          <input type="hidden" name="court_location" id="fallback-court-location">
        </div>

        <!-- Continue with the rest of your form... -->

      </form>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 HabeasNow.org. No data is stored. This tool is open-source and privacy-first.</p>
  </footer>
  <script src="fallbackDistricts.js"></script>
  <script>
    const courtMap = {
      "90001": {
        district: "Central District of California",
        court_name: "U.S. District Court for the Central District of California",
        location: "350 W 1st St, Los Angeles, CA 90012",
        website: "https://www.cacd.uscourts.gov"
      },
      // Add all your ZIP-mapped districts here...
    };

    const fallbackDistricts = [
      { label: "District of Columbia – Washington, DC 20001", value: "20001" },
      { label: "Northern District of Alabama – Birmingham, AL 35203", value: "35203" },
      { label: "Middle District of Alabama – Montgomery, AL 36104", value: "36104" },
      { label: "Southern District of Alabama – Mobile, AL 36602", value: "36602" },
      { label: "District of Alaska – Anchorage, AK 99513", value: "99513" },
      // Continue with remaining 89...
    ];

    document.addEventListener("DOMContentLoaded", function () {
      const zipInput = document.getElementById("zip_code");
      const courtInfo = document.getElementById("court-info");
      const fallbackContainer = document.getElementById("fallback-court-container");
      const fallbackSelect = document.getElementById("fallback-court");

      const districtInput = document.getElementById("fallback-court-district");
      const nameInput = document.getElementById("fallback-court-name");
      const locationInput = document.getElementById("fallback-court-location");

      fallbackDistricts.forEach(court => {
        const opt = document.createElement("option");
        opt.value = court.value;
        opt.textContent = court.label;
        fallbackSelect.appendChild(opt);
      });

      zipInput.addEventListener("blur", () => {
        const zip = zipInput.value.trim();
        if (courtMap[zip]) {
          const court = courtMap[zip];
          courtInfo.innerHTML = `
            <strong>Filing District:</strong> ${court.court_name}<br>
            <strong>Location:</strong> ${court.location}<br>
            <strong>Website:</strong> <a href="${court.website}" target="_blank">${court.website}</a>
            <input type="hidden" name="court_district" value="${court.district}">
            <input type="hidden" name="court_name" value="${court.court_name}">
            <input type="hidden" name="court_location" value="${court.location}">
          `;
          fallbackContainer.style.display = "none";
        } else {
          courtInfo.innerHTML = `<em>ZIP code not recognized – please choose court manually.</em>`;
          fallbackContainer.style.display = "block";
        }
      });

      fallbackSelect.addEventListener("change", () => {
        const zip = fallbackSelect.value;
        const court = courtMap[zip];
        if (court) {
          districtInput.value = court.district;
          nameInput.value = court.court_name;
          locationInput.value = court.location;
        }
      });
    });
  </script>
</body>
</html>
