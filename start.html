<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emergency Legal Action to Stop a Secret Transfer</title>
  <link rel="stylesheet" href="style.css">
  <script src="fallbackDistricts.js"></script>
</head>
<body>
  <header>
    <h1>HabeasNow</h1>
    <p class="tagline">Emergency Legal Toolkit ‚Äì AO 242 Petition</p>
    <nav>
      <a href="index.html">Home</a>
      <a href="start.html" class="active">Start Petition</a>
      <a href="families.html">For Families</a>
      <a href="lawyers.html">For Lawyers</a>
      <a href="how.html">How It Works</a>
      <a href="about.html">About</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h2>Emergency Legal Action to Stop a Secret Transfer</h2>
      <p><strong>Use this form if someone has been detained without charges or is at risk of being transferred or disappeared.</strong></p>
      <p>This form uses the power of United States law to stop unlawful detention and prevent abuse of authority.</p>
      <p>No person in the United States‚Äîcitizen or not‚Äîshould be removed, imprisoned, or held beyond the reach of a judge. The Constitution secures this principle through the Great Writ of habeas corpus, codified at 28 U.S.C. ¬ß 2241. This tool helps ordinary people activate that right, with urgency, dignity, and clarity.</p>
    </section>

    <section class="content">
         <form id="qtef-form">
        <h3>1. Who is Being Detained?</h3>
        <label>Full Name: <input type="text" name="detainee_name" required></label><br>
        <label>Date of Birth: <input type="date" name="detainee_dob"></label><br>
        <label>Citizenship Status:
          <select name="citizenship">
            <option value="us">U.S. Citizen</option>
            <option value="green_card">Green Card Holder</option>
            <option value="other">Other</option>
          </select>
        </label><br>
        <label>Has this person been charged?
          <select name="charged">
            <option value="no">No</option>
            <option value="unsure">Unsure</option>
            <option value="yes">Yes</option>
          </select>
        </label><br>

        <h3>2. When and where were they last seen?</h3>
        <label>Date of Seizure or Last Contact: <input type="date" name="last_seen_date"></label><br>
        <label>Last Known Location: <input type="text" name="last_location" required></label><br>
        <label>ZIP Code of Seizure or Last Known Location: <input type="text" name="zip_code" id="zip_code" pattern="\d{5}" required></label><br>
        <div id="court-info-wrapper" style="margin-top: 0.5em;"><div id="court-info"></div></div>
        <label>If you don‚Äôt know the ZIP code or it wasn't recognized, select the nearest court:
          <select name="fallback_district" id="fallback-district-select">
            <option value="">Choose a federal district court...</option>
          </select>
        </label><br>
        <label><input type="checkbox" id="foreign_seizure" name="foreign_seizure"> The seizure occurred at a U.S. embassy or outside the United States.</label><br>
        <label>Who Seized Them?
          <select name="arresting_agency">
            <option value="federal">Federal agents (FBI, DHS, etc.)</option>
            <option value="local">Local police</option>
            <option value="foreign">Foreign agents</option>
            <option value="unknown">Unknown</option>
          </select>
        </label><br>
        <label>Do you believe they were transferred?
          <select name="transferred">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option value="unsure">Unsure</option>
          </select>
        </label><br>
        <label>If yes, where? <input type="text" name="transfer_location"></label><br>

        <h3>3. Risk of Removal</h3>
        <label>Are they at risk of removal from the U.S. or U.S. control?
          <select name="removal_risk">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option value="unsure">Unsure</option>
          </select>
        </label><br>
        <label>Can they currently communicate with anyone?
          <select name="communication_possible">
            <option value="no">No</option>
            <option value="yes">Yes</option>
            <option value="unknown">Unknown</option>
          </select>
        </label><br>

        <h3>4. Who Are You?</h3>
        <label>Your Full Name: <input type="text" name="filer_name" required></label><br>
        <label>Relationship:
          <select name="relationship">
            <option value="family">Family member</option>
            <option value="friend">Friend</option>
            <option value="attorney">Attorney</option>
            <option value="advocate">Advocate</option>
          </select>
        </label><br>
        <label>Email: <input type="email" name="email" required></label><br>
        <label>Phone: <input type="tel" name="phone"></label><br>
        <label>Address: <input type="text" name="address"></label><br>
        <label>Are you filing because the detainee cannot?
          <select name="next_friend_basis">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option value="missing">They are missing / incommunicado</option>
            <option value="attorney">I am their legal representative</option>
          </select>
        </label><br>

        <h3>5. Legal Grounds for Relief</h3>
        <p><em>Please review and check all statements that apply. These are grouped by role to guide your selections.</em></p>

        <fieldset>
          <legend>üë™ <strong>Family Member / Friend:</strong></legend>
          <label><input type="checkbox" name="grounds_family[]" value="1"> My family member is a U.S. citizen who has been detained without charges or judicial review...</label><br>
          <label><input type="checkbox" name="grounds_family[]" value="2"> They have not had access to a lawyer, a hearing before a judge...</label><br>
          <label><input type="checkbox" name="grounds_family[]" value="3"> I believe this violates their constitutional rights...</label><br>
          <label><input type="checkbox" name="grounds_family[]" value="4"> I am concerned that their detention conditions...</label>
        </fieldset>

        <fieldset>
          <legend>‚öñÔ∏è <strong>Attorney:</strong></legend>
          <label><input type="checkbox" name="grounds_attorney[]" value="1"> My client has been detained or transferred abroad without indictment...</label><br>
          <label><input type="checkbox" name="grounds_attorney[]" value="2"> This detention violates their Fifth Amendment right...</label><br>
          <label><input type="checkbox" name="grounds_attorney[]" value="3"> No statutory or constitutional authority exists...</label><br>
          <label><input type="checkbox" name="grounds_attorney[]" value="4"> The conditions of confinement may violate...</label>
        </fieldset>

        <fieldset>
          <legend>üïäÔ∏è <strong>Third-Party Advocate:</strong></legend>
          <label><input type="checkbox" name="grounds_advocate[]" value="1"> I have credible and specific information...</label><br>
          <label><input type="checkbox" name="grounds_advocate[]" value="2"> I believe the government is denying them access to the courts...</label><br>
          <label><input type="checkbox" name="grounds_advocate[]" value="3"> I respectfully request that the Court intervene...</label>
        </fieldset>

        <h3>6. Relief Requested</h3>
        <fieldset>
          <legend>üë™ <strong>Family Member / Friend:</strong></legend>
          <label><input type="checkbox" name="relief_family[]" value="1"> Issue an emergency writ of habeas corpus...</label><br>
          <label><input type="checkbox" name="relief_family[]" value="2"> Request an immediate injunction...</label><br>
          <label><input type="checkbox" name="relief_family[]" value="3"> Seek judicial declaration...</label><br>
          <label><input type="checkbox" name="relief_family[]" value="4"> Urge the court to mandate communication access...</label><br>
          <label><input type="checkbox" name="relief_family[]" value="5"> Ask for expedited hearing...</label>
        </fieldset>

        <fieldset>
          <legend>‚öñÔ∏è <strong>Attorney:</strong></legend>
          <label><input type="checkbox" name="relief_attorney[]" value="1"> Compel return to U.S. jurisdiction...</label><br>
          <label><input type="checkbox" name="relief_attorney[]" value="2"> Declare executive policy unconstitutional...</label><br>
          <label><input type="checkbox" name="relief_attorney[]" value="3"> Grant injunctive relief...</label>
        </fieldset>

        <fieldset>
          <legend>üïäÔ∏è <strong>Third-Party Advocate:</strong></legend>
          <label><input type="checkbox" name="relief_advocate[]" value="1"> Preserve access to the U.S. legal system...</label><br>
          <label><input type="checkbox" name="relief_advocate[]" value="2"> Request immediate court review...</label>
        </fieldset>

        <h3>7. Declaration</h3>
        <label><input type="checkbox" name="declaration" required> I declare under penalty of perjury that the above is true...</label><br>
        <label>Digital Signature: <input type="text" name="signature" required></label><br>
        <label>Date: <input type="date" name="signature_date"></label><br><br>

        <button type="submit">Submit and Generate Emergency Filings</button>
      </form>

      <p style="margin-top: 2rem;">üîí <em>This form does not store any data. Your responses stay on your device unless you export them.</em></p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 HabeasNow.org. No data is stored. This tool is open-source and privacy-first.</p>
  </footer>

  <script>
    const form = document.getElementById("qtef-form");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const formData = new FormData(form);
      const get = (name) => formData.get(name) || "<em>Not provided</em>";
      const getAll = (name) => formData.getAll(name) || [];

      const preview = document.createElement("section");
      preview.id = "preview";
      preview.innerHTML = `
        <h2>üìã Preview Your Emergency Filing</h2>
        <h3>1. Who is Being Detained?</h3>
        <p><strong>Full Name:</strong> ${get("detainee_name")}<br>
        <strong>Date of Birth:</strong> ${get("detainee_dob")}<br>
        <strong>Citizenship:</strong> ${get("citizenship")}<br>
        <strong>Charged:</strong> ${get("charged")}</p>

        <h3>2. Seizure Information</h3>
        <p>
          <strong>Last Known Location:</strong> ${get("last_location")}<br>
          <strong>ZIP Code:</strong> ${get("zip_code")}<br>
          <strong>Date of Seizure:</strong> ${get("last_seen_date")}<br>
          <strong>Who Seized Them:</strong> ${get("arresting_agency")}<br>
          <strong>Believed Transferred:</strong> ${get("transferred")}<br>
          <strong>Transfer Location:</strong> ${get("transfer_location")}
        </p>

        <h4>üìç Filing Court</h4>
        <p>
          <strong>District:</strong> ${get("court_district")}<br>
          <strong>Court Name:</strong> ${get("court_name")}<br>
          <strong>Location:</strong> ${get("court_location")}
        </p>

        <h3>3. Risk of Removal</h3>
        <p><strong>Risk of Removal:</strong> ${get("removal_risk")}<br>
        <strong>Can Communicate:</strong> ${get("communication_possible")}</p>

        <h3>4. Who Are You?</h3>
        <p><strong>Your Name:</strong> ${get("filer_name")}<br>
        <strong>Relationship:</strong> ${get("relationship")}<br>
        <strong>Email:</strong> ${get("email")}<br>
        <strong>Phone:</strong> ${get("phone")}<br>
        <strong>Address:</strong> ${get("address")}<br>
        <strong>Filing Basis:</strong> ${get("next_friend_basis")}</p>

        <h3>5. Legal Grounds Selected</h3>
        ${renderChecklist("grounds_family[]", [
          "Detained without charges or judicial review and at risk of secret removal",
          "No access to lawyer, judge, or court review",
          "Violates constitutional rights including due process and habeas corpus",
          "Detention conditions may amount to cruel and unusual punishment"
        ])}

        ${renderChecklist("grounds_attorney[]", [
          "Held or transferred abroad without indictment, counsel, or court access",
          "Violates Fifth Amendment due process and suspends habeas rights",
          "Executive acted without lawful authority",
          "Confinement conditions may violate Eighth Amendment"
        ])}

        ${renderChecklist("grounds_advocate[]", [
          "Credible information of detention without charges or legal process",
          "Risk of removal without judicial review",
          "Request court protection to ensure constitutional rights"
        ])}

        <h3>6. Relief Requested</h3>
        ${renderChecklist("relief_family[]", [
          "Issue emergency writ of habeas corpus to bring loved one under U.S. protection",
          "Prevent further transfer or removal from U.S. jurisdiction",
          "Declare the detention unlawful and ensure access to counsel and court",
          "Mandate communication access",
          "Ask for expedited hearing or status conference"
        ])}

        ${renderChecklist("relief_attorney[]", [
          "Compel return to U.S. jurisdiction via writ of habeas corpus",
          "Declare executive transfer/detention policy unconstitutional",
          "Grant injunctive relief to stop further illegal detention"
        ])}

        ${renderChecklist("relief_advocate[]", [
          "Preserve access to the U.S. legal system and prevent removal",
          "Request immediate court review and protective relief"
        ])}

        <h3>7. Declaration</h3>
        <p><strong>Signature:</strong> ${get("signature")}<br>
        <strong>Date:</strong> ${get("signature_date")}</p>
      `;

      const shouldIncludeTRO = formData.get("transferred") === "yes" || formData.get("removal_risk") === "yes";
      if (shouldIncludeTRO) {
        preview.innerHTML += `
          <h3>8. Temporary Restraining Order (TRO) Request</h3>
          <p>Based on your answers, we‚Äôve included a draft request for emergency relief to stop any removal or transfer.</p>
          <blockquote>
            Petitioner respectfully requests that this Court issue a Temporary Restraining Order (TRO) prohibiting the Respondents, their agents, or any U.S. government officials from transferring, removing, or otherwise relocating the detained individual from their current location or out of United States legal jurisdiction, pending judicial review of this petition.
          </blockquote>
          <p>This section is included because your filing indicates an urgent risk of disappearance or secret transfer. You may edit or remove it before filing.</p>
        `;
      }

      const buttons = document.createElement("div");
      buttons.style.marginTop = "20px";

      const editBtn = document.createElement("button");
      editBtn.textContent = "üîô Go Back and Edit";
      editBtn.onclick = () => {
        preview.remove();
        form.style.display = "block";
      };

      const confirmBtn = document.createElement("button");
      confirmBtn.textContent = "‚úÖ Confirm and Generate Filing";
      confirmBtn.onclick = () => {
        const query = new URLSearchParams(new FormData(form)).toString();
        window.location.href = `printable.html?${query}`;
      };

      buttons.appendChild(editBtn);
      buttons.appendChild(confirmBtn);
      preview.appendChild(buttons);

      form.style.display = "none";
      document.querySelector("main").appendChild(preview);
      preview.scrollIntoView({ behavior: "smooth" });

      function renderChecklist(name, labels) {
        const selections = formData.getAll(name);
        if (selections.length === 0) return "<p><strong>${name}</strong>: <em>None selected</em></p>";
        return `<ul>` + selections.map(v => `<li>${labels[parseInt(v) - 1]}</li>`).join("") + `</ul>`;
      }
    });
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const zipInput = document.querySelector('input[name="zip_code"]');
      const fallbackSelect = document.getElementById("fallback-district-select");
      const wrapper = document.getElementById("court-info-wrapper");
      const infoBox = document.getElementById("court-info");

        const courtMap = {
    "10001": {
      district: "Southern District of New York",
      court_name: "U.S. District Court for the Southern District of New York",
      location: "500 Pearl Street, New York, NY 10007",
      website: "https://www.nysd.uscourts.gov"
    },
    "90001": {
      district: "Central District of California",
      court_name: "U.S. District Court for the Central District of California",
      location: "350 W 1st St, Los Angeles, CA 90012",
      website: "https://www.cacd.uscourts.gov"
    },
    "60601": {
      district: "Northern District of Illinois",
      court_name: "U.S. District Court for the Northern District of Illinois",
      location: "219 S Dearborn St, Chicago, IL 60604",
      website: "https://www.ilnd.uscourts.gov"
    },
    "94102": {
      district: "Northern District of California",
      court_name: "U.S. District Court for the Northern District of California",
      location: "450 Golden Gate Ave, San Francisco, CA 94102",
      website: "https://www.cand.uscourts.gov"
    },
    "33101": {
      district: "Southern District of Florida",
      court_name: "U.S. District Court for the Southern District of Florida",
      location: "400 North Miami Ave, Miami, FL 33128",
      website: "https://www.flsd.uscourts.gov"
    }
  };

      if (fallbackSelect && window.fallbackDistricts) {
        fallbackDistricts.forEach(entry => {
          const option = document.createElement("option");
          option.value = entry.value;
          option.textContent = entry.label;
          fallbackSelect.appendChild(option);
        });
      }

      zipInput.addEventListener("blur", () => {
        const zip = zipInput.value;

        if (courtMap[zip]) {
          const court = courtMap[zip];
          infoBox.innerHTML = `
            <strong>Filing District:</strong> ${court.court_name}<br>
            <strong>Location:</strong> ${court.location}<br>
            <strong>Website:</strong> <a href="${court.website}" target="_blank">${court.website}</a>
          `;

          wrapper.querySelectorAll("input[name^='court_']").forEach(el => el.remove());

          const hiddenInputs = `
            <input type="hidden" name="court_district" value="${court.district}">
            <input type="hidden" name="court_name" value="${court.court_name}">
            <input type="hidden" name="court_location" value="${court.location}">
          `;
          wrapper.insertAdjacentHTML("beforeend", hiddenInputs);
        } else {
          infoBox.innerHTML = `
            <em>ZIP code not recognized ‚Äî please select the closest federal court below.</em>
          `;
        }
      });
    });
  </script>
</body>
</html>

