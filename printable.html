<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emergency Legal Action to Stop a Secret Transfer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>HabeasNow</h1>
    <p class="tagline">Emergency Legal Toolkit â€“ AO 242 Petition</p>
    <nav>
      <a href="index.html">Home</a>
      <a href="start.html" class="active">Start Petition</a>
      <a href="families.html">For Families</a>
      <a href="lawyers.html">For Lawyers</a>
      <a href="how.html">How It Works</a>
      <a href="about.html">About</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h2>Emergency Legal Action to Stop a Secret Transfer</h2>
      <p><strong>Use this form if someone has been detained without charges or is at risk of being transferred or disappeared.</strong></p>
      <p>This form uses the power of United States law to stop unlawful detention and prevent abuse of authority.</p>
    </section>

    <section class="content">
      <form id="qtef-form">
        <!-- form content here -->
      </form>

      <p style="margin-top: 2rem;">ðŸ”’ <em>This form does not store any data. Your responses stay on your device unless you export them.</em></p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 HabeasNow.org. No data is stored. This tool is open-source and privacy-first.</p>
  </footer>

<script>
  const form = document.getElementById("qtef-form");

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const formData = new FormData(form);
    const get = (name) => formData.get(name) || "<em>Not provided</em>";
    const getAll = (name) => formData.getAll(name) || [];

    const preview = document.createElement("section");
    preview.id = "preview";
    preview.innerHTML = `
      <h2>ðŸ“‹ Preview Your Emergency Filing</h2>

      <h3>1. Who is Being Detained?</h3>
      <p><strong>Full Name:</strong> ${get("detainee_name")}<br>
      <strong>Date of Birth:</strong> ${get("detainee_dob")}<br>
      <strong>Citizenship:</strong> ${get("citizenship")}<br>
      <strong>Charged:</strong> ${get("charged")}</p>

      <h3>2. Seizure Information</h3>
      <p><strong>Last Known Location:</strong> ${get("last_location")}<br>
      <strong>ZIP Code:</strong> ${get("zip_code")}<br>
      <strong>Date of Seizure:</strong> ${get("last_seen_date")}<br>
      <strong>Who Seized Them:</strong> ${formatSeizingAgency(get("arresting_agency"))}<br>
      <strong>Believed Transferred:</strong> ${get("transferred")}<br>
      <strong>Transfer Location:</strong> ${get("transfer_location")}</p>

      <h3>3. Risk of Removal</h3>
      <p><strong>Risk of Removal:</strong> ${get("removal_risk")}<br>
      <strong>Can Communicate:</strong> ${get("communication_possible")}</p>

      <h3>4. Who Are You?</h3>
      <p><strong>Your Name:</strong> ${get("filer_name")}<br>
      <strong>Relationship:</strong> ${get("relationship")}<br>
      <strong>Email:</strong> ${get("email")}<br>
      <strong>Phone:</strong> ${get("phone")}<br>
      <strong>Address:</strong> ${get("address")}<br>
      <strong>Filing Basis:</strong> ${get("next_friend_basis")}</p>

      <h3>5. Legal Grounds Selected</h3>
      <p><strong>Family Member:</strong>${renderChecklist("grounds_family[]", [
        "Detained without charges or judicial review and at risk of secret removal",
        "No access to lawyer, judge, or court review",
        "Violates constitutional rights including due process and habeas corpus",
        "Detention conditions may amount to cruel and unusual punishment"
      ])}</p>

      <p><strong>Attorney:</strong>${renderChecklist("grounds_attorney[]", [
        "Held or transferred abroad without indictment, counsel, or court access",
        "Violates Fifth Amendment due process and suspends habeas rights",
        "Executive acted without lawful authority",
        "Confinement conditions may violate Eighth Amendment"
      ])}</p>

      <p><strong>Third-Party Advocate:</strong>${renderChecklist("grounds_advocate[]", [
        "Credible information of detention without charges or legal process",
        "Risk of removal without judicial review",
        "Request court protection to ensure constitutional rights"
      ])}</p>

      <h3>6. Relief Requested</h3>
      <p><strong>Family Member:</strong>${renderChecklist("relief_family[]", [
        "Issue emergency writ of habeas corpus to bring loved one under U.S. protection",
        "Prevent further transfer or removal from U.S. jurisdiction",
        "Declare the detention unlawful and ensure access to counsel and court"
      ])}</p>

      <p><strong>Attorney:</strong>${renderChecklist("relief_attorney[]", [
        "Compel return to U.S. jurisdiction via writ of habeas corpus",
        "Declare executive transfer/detention policy unconstitutional",
        "Grant injunctive relief to stop further illegal detention"
      ])}</p>

      <p><strong>Advocate:</strong>${renderChecklist("relief_advocate[]", [
        "Preserve access to the U.S. legal system and prevent removal",
        "Request immediate court review and protective relief"
      ])}</p>

      <h3>7. Declaration</h3>
      <p><strong>Signature:</strong> ${get("signature")}<br>
      <strong>Date:</strong> ${get("signature_date")}</p>
    `;

    const shouldIncludeTRO =
      formData.get("transferred") === "yes" ||
      formData.get("removal_risk") === "yes";

    if (shouldIncludeTRO) {
      preview.innerHTML += `
        <h3>8. Temporary Restraining Order (TRO) Request</h3>
        <p>
          Based on your answers, weâ€™ve included a draft request for emergency relief to stop any removal or transfer.
        </p>
        <blockquote>
          Petitioner respectfully requests that this Court issue a Temporary Restraining Order (TRO) prohibiting the Respondents, their agents, or any U.S. government officials from transferring, removing, or otherwise relocating the detained individual from their current location or out of United States legal jurisdiction, pending judicial review of this petition.
        </blockquote>
        <p>
          This section is included because your filing indicates an urgent risk of disappearance or secret transfer. You may edit or remove it before filing.
        </p>
      `;
    }

    const buttons = document.createElement("div");
    buttons.style.marginTop = "20px";

    const editBtn = document.createElement("button");
    editBtn.textContent = "ðŸ”™ Go Back and Edit";
    editBtn.onclick = () => {
      preview.remove();
      form.style.display = "block";
    };

    const confirmBtn = document.createElement("button");
    confirmBtn.textContent = "âœ… Confirm and Generate Filing";
    confirmBtn.onclick = () => {
      const query = new URLSearchParams(new FormData(form)).toString();
      window.location.href = `printable.html?${query}`;
    };

    buttons.appendChild(editBtn);
    buttons.appendChild(confirmBtn);
    preview.appendChild(buttons);

    form.style.display = "none";
    document.querySelector("main").appendChild(preview);
    preview.scrollIntoView({ behavior: "smooth" });

    function renderChecklist(name, labels) {
      const selections = formData.getAll(name);
      if (selections.length === 0) return "<em> None selected</em>";
      return "<ul>" + selections.map(v => `<li>${labels[parseInt(v) - 1]}</li>`).join("") + "</ul>";
    }

    function formatSeizingAgency(value) {
      const mapping = {
        federal: "Agents of the federal government",
        local: "Local law enforcement officers",
        foreign: "Agents of a foreign government",
        unknown: "Unknown or unidentified personnel"
      };
      return mapping[value] || value;
    }
  });
</script>
</body>
</html>
